-- Portaverse_V2.tb_user definition

CREATE TABLE `tb_user` (
  `user_id` int NOT NULL AUTO_INCREMENT,
  `uid` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL,
  `role_code` varchar(4) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL,
  `privilege_group_id` int DEFAULT NULL,
  `email` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL,
  `phone_number` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL,
  `last_login` timestamp NULL DEFAULT NULL,
  `last_privilege_change` timestamp NULL DEFAULT NULL,
  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `deletedAt` timestamp NULL DEFAULT NULL,
  `referal_employee_id` int DEFAULT NULL,
  `referal_code` varchar(30) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL,
  `employee_number` varchar(255) DEFAULT NULL,
  `firstname` varchar(255) DEFAULT NULL,
  `unit_induk` text,
  `work_area` varchar(255) DEFAULT NULL,
  `work_unit` text,
  `error` text,
  `is_sended_reset_password` int DEFAULT NULL,
  `has_update_password_nipp` int DEFAULT NULL,
  `status` int DEFAULT NULL,
  `is_external_user` tinyint(1) DEFAULT '0',
  `start_date` datetime DEFAULT CURRENT_TIMESTAMP,
  `end_date` datetime DEFAULT '9999-12-31 23:59:59',
  `last_change_password_at` datetime DEFAULT NULL,
  `is_email_otp_required` tinyint(1) NOT NULL DEFAULT '1' COMMENT '1 = wajib OTP email, 0 = bypass',
  PRIMARY KEY (`user_id`),
  KEY `tb_user_FK_1` (`privilege_group_id`),
  KEY `tb_user_FK` (`role_code`),
  CONSTRAINT `tb_user_FK_1` FOREIGN KEY (`privilege_group_id`) REFERENCES `tb_privilege_group` (`privilege_group_id`) ON DELETE SET NULL
) ENGINE=InnoDB AUTO_INCREMENT=49151 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;